import{a as s}from"./firestore.CqG66g85.js";import"./firebase.DTSg3m3I.js";const r=document.getElementById("add-product-modal"),c=document.getElementById("add-product-form"),i=document.getElementById("close-add-modal"),l=document.getElementById("cancel-add-product");function u(){r&&(r.classList.remove("hidden"),c?.reset())}function a(){r&&r.classList.add("hidden")}i?.addEventListener("click",a);l?.addEventListener("click",a);r?.addEventListener("click",n=>{n.target===r&&a()});document.addEventListener("keydown",n=>{n.key==="Escape"&&r&&!r.classList.contains("hidden")&&a()});c?.addEventListener("submit",async n=>{n.preventDefault();const t=new FormData(c),e={name:t.get("name"),description:t.get("description"),price:parseFloat(t.get("price")),image:t.get("image"),category:t.get("category"),stock:parseInt(t.get("stock")),featured:t.get("featured")==="on"};if(!e.name||!e.description||!e.image||!e.category){d("Por favor completa todos los campos requeridos","error");return}if(e.price<=0){d("El precio debe ser mayor a 0","error");return}if(e.stock<0){d("El stock no puede ser negativo","error");return}try{const o=c.querySelector('button[type="submit"]'),m=o.textContent;o.textContent="Agregando...",o.disabled=!0,(await s(e)).success?(d("Â¡Producto agregado exitosamente!","success"),a(),setTimeout(()=>{window.location.reload()},1500)):d("Error al agregar el producto","error")}catch(o){console.error("Error:",o),d("Error al agregar el producto","error")}finally{const o=c.querySelector('button[type="submit"]');o.textContent=originalText,o.disabled=!1}});function d(n,t){const e=document.createElement("div");e.className=`fixed top-4 right-4 px-6 py-3 rounded-lg text-white font-medium z-50 ${t==="success"?"bg-green-600":"bg-red-600"}`,e.textContent=n,document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}window.openAddProductModal=u;
