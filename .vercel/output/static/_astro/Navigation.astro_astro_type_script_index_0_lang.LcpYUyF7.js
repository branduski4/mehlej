import{b as y,a as h}from"./firebase.DTSg3m3I.js";let r=[];window.toggleCart=function(){const t=document.getElementById("cart-sidebar"),e=document.getElementById("cart-overlay");t.classList.contains("translate-x-full")?(t.classList.remove("translate-x-full"),e.classList.remove("hidden"),document.body.style.overflow="hidden"):(t.classList.add("translate-x-full"),e.classList.add("hidden"),document.body.style.overflow="auto")};window.toggleMobileMenu=function(){document.getElementById("mobile-menu").classList.toggle("hidden")};window.openLoginModal=function(){console.log("Opening login modal...");const t=document.getElementById("login-modal");if(t){t.classList.remove("hidden"),document.body.style.overflow="hidden";const e=document.getElementById("mobile-menu");e&&e.classList.add("hidden"),console.log("Modal opened successfully")}else console.error("Login modal not found")};window.closeLoginModal=function(){console.log("Closing login modal...");const t=document.getElementById("login-modal");if(t){t.classList.add("hidden"),document.body.style.overflow="auto";const e=document.getElementById("login-form");e&&e.reset();const n=document.getElementById("login-error");n&&n.classList.add("hidden"),console.log("Modal closed successfully")}};document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, setting up login form...");const t=document.getElementById("login-modal");t&&t.addEventListener("click",e=>{e.target===t&&closeLoginModal()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&closeLoginModal()})});window.handleLogin=async function(t){t.preventDefault();const e=document.getElementById("email"),n=document.getElementById("password"),o=document.getElementById("login-error");if(!e||!n){console.error("Email or password input not found");return}const u=e.value,g=n.value;console.log("Login attempt:",{email:u}),console.log("Firebase config check:",{apiKey:"Present",authDomain:"Present",projectId:"Present"});const l=t.target.querySelector('button[type="submit"]'),f=l.textContent;l.textContent="Iniciando sesión...",l.disabled=!0;try{console.log("Attempting Firebase authentication...");const s=await y(h,u,g);console.log("Login successful:",s.user),console.log("User email:",s.user.email),console.log("User UID:",s.user.uid),o&&(o.textContent="¡Login exitoso! Redirigiendo al dashboard...",o.classList.remove("hidden"),o.classList.remove("text-red-400"),o.classList.add("text-green-400")),console.log("Redirecting to dashboard in 1.5 seconds..."),setTimeout(()=>{console.log("Executing redirect to /admin/dashboard"),window.location.href="/admin/dashboard"},1500)}catch(s){if(console.error("Login error:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),o){let a="Credenciales incorrectas. Por favor intenta de nuevo.";switch(s.code){case"auth/user-not-found":a="No existe una cuenta con este correo electrónico.";break;case"auth/wrong-password":a="Contraseña incorrecta.";break;case"auth/invalid-email":a="Correo electrónico inválido.";break;case"auth/too-many-requests":a="Demasiados intentos fallidos. Intenta más tarde.";break;case"auth/network-request-failed":a="Error de conexión. Verifica tu internet.";break;case"auth/invalid-api-key":a="Error de configuración de Firebase.";break}o.textContent=a,o.classList.remove("hidden"),o.classList.remove("text-green-400"),o.classList.add("text-red-400")}}finally{l.textContent=f,l.disabled=!1}};function i(){const t=document.getElementById("cart-badge"),e=r.reduce((n,o)=>n+o.quantity,0);e>0?(t.style.display="flex",t.textContent=e.toString()):t.style.display="none"}function d(){const t=r.reduce((n,o)=>n+o.product.price*o.quantity,0),e=document.getElementById("cart-total");e.textContent=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(t)}function c(){const t=document.getElementById("cart-items");if(r.length===0){t.innerHTML=`
        <div class="text-center text-luxury-gold-light">
          <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"></path>
          </svg>
          <p>Tu carrito está vacío</p>
        </div>
      `;return}t.innerHTML=r.map(e=>`
      <div class="flex items-center space-x-4 mb-4 p-4 bg-luxury-black rounded-lg">
        <img src="${e.product.image}" alt="${e.product.name}" class="w-16 h-16 object-cover rounded">
        <div class="flex-1">
          <h4 class="text-luxury-white font-medium">${e.product.name}</h4>
          <p class="text-luxury-gold-light text-sm">${new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e.product.price)}</p>
        </div>
        <div class="flex items-center space-x-2">
          <button onclick="updateCartQuantity('${e.id}', ${e.quantity-1})" class="w-6 h-6 rounded border border-luxury-gold text-luxury-gold hover:bg-luxury-gold hover:text-luxury-black transition-colors duration-200 flex items-center justify-center">-</button>
          <span class="w-8 text-center text-luxury-white">${e.quantity}</span>
          <button onclick="updateCartQuantity('${e.id}', ${e.quantity+1})" class="w-6 h-6 rounded border border-luxury-gold text-luxury-gold hover:bg-luxury-gold hover:text-luxury-black transition-colors duration-200 flex items-center justify-center">+</button>
        </div>
        <button onclick="removeFromCart('${e.id}')" class="text-red-400 hover:text-red-300 transition-colors duration-200">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
          </svg>
        </button>
      </div>
    `).join("")}function p(t,e){const n=r.find(o=>o.product.id===t.id);n?n.quantity+=e:r.push({id:Date.now().toString(),product:t,quantity:e}),i(),d(),c(),localStorage.setItem("cart",JSON.stringify(r))}function x(t,e){if(e<=0){m(t);return}const n=r.find(o=>o.id===t);n&&(n.quantity=e,i(),d(),c(),localStorage.setItem("cart",JSON.stringify(r)))}function m(t){r=r.filter(e=>e.id!==t),i(),d(),c(),localStorage.setItem("cart",JSON.stringify(r))}function v(){r.length>0&&(window.location.href="/checkout")}document.addEventListener("DOMContentLoaded",()=>{const t=localStorage.getItem("cart");t&&(r=JSON.parse(t),i(),d(),c())});window.addToCart=p;window.updateCartQuantity=x;window.removeFromCart=m;window.proceedToCheckout=v;
